<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="geo_trouble_i.xml" version="5.0" xml:id="sec-ha-geo-trouble">


 <title>Solução de problemas</title>

 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:maintainer/>
        <dm:status>editando</dm:status>
        <dm:deadline/>
        <dm:priority/>
        <dm:translation>yes (sim)</dm:translation>
        <dm:languages/>
        <dm:release/>
        <dm:repository/>
      </dm:docmanager>
    </info>
    <para>
  O booth usa o mesmo mecanismo de registro que o CRM. Dessa forma, a mudança no nível de registro também afeta o registro do booth. As mensagens de registro do booth também contêm informações sobre quaisquer tickets.
 </para>

 <para>
  Tanto as mensagens de registro quanto o arquivo de configuração de booth estão incluídos em <command>crm report</command>.
 </para>

 <para>
  Em caso de comportamento inesperado do booth ou quaisquer problemas, consulte os dados de registro com o comando <command>sudo journalctl -n</command> ou crie um relatório detalhado do cluster com o comando <command>crm report</command>.
 </para>

 <para>
  Se você pode acessar os nós do cluster em todos os sites (além dos arbitradores) de um único host via SSH, é possível coletar os arquivos de registro de todos eles no mesmo <literal>crm report</literal>. Ao chamar o <command>crm report</command> com a opção <option>-n</option>, ele obtém os arquivos de registro de todos os hosts que você especificar com a opção <option>-n</option>. (Sem a opção <option>-n</option>, ele tenta obter a lista de nós do respectivo cluster.) Por exemplo, para criar um único <literal>crm report</literal> que inclua os arquivos de registro de dois clusters com dois nós (<literal>192.168.201.111</literal>|<literal>192.168.201.112</literal> e <literal>192.168.202.111</literal>|<literal>192.168.202.112</literal>) e um arbitrador (<literal>147.2.207.14</literal>), use o seguinte comando:
 </para>

<screen><prompt role="root">root # </prompt> crm report -n "147.2.207.14 192.168.201.111 192.168.201.112 \
 192.168.202.111 192.168.202.112"  -f 10:00 -t 11:00 db-incident</screen>

 <para>
  Se o problema é apenas com o booth, e você sabe em quais nós do cluster (em um site) o booth está sendo executado, especifique apenas os dois nós e o arbitrador.
 </para>

 <para>
  Se não houver uma maneira de acessar todos os sites de um host, execute o <command>crm report</command> individualmente no arbitrador e nos nós do cluster dos sites individuais, especificando o mesmo período de tempo. Para coletar os arquivos de registro em um arbitrador, você deve usar a opção <option>-S</option> para uma operação de nó único:
 </para>

<screen>amsterdam # crm report -f 10:00 -t 11:00 db-incident-amsterdam
berlin # crm report -f 10:00 -t 11:00 db-incident-berlin
arbitrator # crm report -S -f 10:00 -t 11:00 db-incident-arbitrator</screen>

 <para>
  No entanto, é preferível gerar um único <literal>crm report</literal> para todas as máquinas das quais você precisa dos arquivos de registro.
 </para>
</sect1>
