<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="geo_trouble_i.xml" version="5.0" xml:id="sec-ha-geo-trouble">


 <title>トラブルシューティング</title>

 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:maintainer/>
        <dm:status>編集</dm:status>
        <dm:deadline/>
        <dm:priority/>
        <dm:translation>yes</dm:translation>
        <dm:languages/>
        <dm:release/>
        <dm:repository/>
      </dm:docmanager>
    </info>
    <para>
  boothではCRMと同じロギングメカニズムが使用されます。したがって、ログレベルを変更すると、boothログにも影響します。boothログメッセージにはチケットに関する情報も格納されています。
 </para>

 <para>
  boothログメッセージとbooth設定ファイルは、どちらも<command>crm report</command>に含まれています。
 </para>

 <para>
  boothの予期せぬ動作や何らかの問題が発生した場合は、<command>sudo journalctl -n</command>を使用してロギングデータを確認するか、<command>crm report</command>を使用して詳細なクラスタレポートを作成します。
 </para>

 <para>
  SSHを介して単一のホストからすべてのサイト(およびアービトレータ)上のクラスタノードにアクセスできる場合は、同じ<literal>crm report</literal>内でこれらのクラスタノードのすべてからログファイルを収集できます。<command>crm report</command>を<option>-n</option>オプション付きで呼び出す場合は、<option>-n</option>で指定したすべてのホストからログファイルが取得されます(<option>-n</option>を指定しない場合は、このコマンドは各クラスタからノードのリストを取得しようとします)。たとえば、2つの2ノードクラスタ(<literal>192.168.201.111</literal>|<literal>192.168.201.112</literal>および<literal>192.168.202.111</literal>|<literal>192.168.202.112</literal>)とアービトレータ(<literal>147.2.207.14</literal>)から得られるログファイルが含まれた単一の<literal>crm report</literal>を作成するには、次のコマンドを使用します。
 </para>

<screen><prompt role="root">root # </prompt> crm report -n "147.2.207.14 192.168.201.111 192.168.201.112 \
 192.168.202.111 192.168.202.112"  -f 10:00 -t 11:00 db-incident</screen>

 <para>
  問題がboothのみに関するものであり、boothが実行されているクラスタノード(サイト内)がわかっている場合は、それら2つのノードとアービトレータのみを指定してください。
 </para>

 <para>
  単一のホストからすべてのサイトにアクセスできない場合は、アービトレータ上および個別サイトのクラスタノード上で、同じ期間を指定して<command>crm report</command>を個別に実行してください。アービトレータ上のログファイルを収集するには、単一ノード操作に<option>-S</option>オプションを使用する必要があります。
 </para>

<screen>amsterdam # crm report -f 10:00 -t 11:00 db-incident-amsterdam
berlin # crm report -f 10:00 -t 11:00 db-incident-berlin
arbitrator # crm report -S -f 10:00 -t 11:00 db-incident-arbitrator</screen>

 <para>
  ただし、ログファイルが必要な対象であるすべてのマシンに関する単一の<literal>crm report</literal>を作成することが推奨されます。
 </para>
</sect1>
