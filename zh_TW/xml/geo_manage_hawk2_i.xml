<?xml version="1.0" encoding="UTF-8"?>
<sect2 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="geo_manage_hawk2_i.xml" xml:id="sec-ha-geo-manage-hawk2" version="5.0">
 <title>使用 HA Web Konsole (Hawk2)</title>

 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:maintainer/>
        <dm:status>編輯</dm:status>
        <dm:deadline/>
        <dm:priority/>
        <dm:translation>yes</dm:translation>
        <dm:languages/>
        <dm:release/>
        <dm:repository/>
      </dm:docmanager>
    </info>
    <para>Hawk2 是用於管理叢集和地理叢集的 Web 使用者介面。</para>

  <sect3 xml:id="sec-ha-geo-manage-hawk2-dashboard">

   <title>使用 Hawk2 儀表板監控多個叢集</title>
   <para>
    <guimenu>儀表板</guimenu>中顯示的叢集資訊儲存在伺服器一方，並在不同叢集節點之間同步 (如果叢集節點之間設定了無密碼 SSH 存取)。如需詳細資料，請參閱 <link xlink:href="http://www.suse.com/documentation/"/> 上的《<citetitle><phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 管理指南</citetitle>》。請參閱「<citetitle>在不使用 <systemitem class="username">root</systemitem> 存取權限</citetitle>的情況下執行叢集報告」 一章中的「<citetitle>設定無密碼 SSH 帳戶</citetitle>」一節。但是，用來執行 Hawk2 的機器甚至不需要為此而加入任何叢集，它可以是獨立的、不相關的系統。
   </para>
  <procedure xml:id="pro-ha-config-hawk2-geo-dashboard">
   <title>使用 Hawk2 監控多個叢集</title>
   <itemizedlist>
    <title>必要條件</title>
    <listitem>
     <para> 要透過 Hawk2 <guimenu>儀表板</guimenu>監控的所有叢集都必須執行 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> <phrase role="productnumber"><phrase os="sles">12 SP2</phrase></phrase>。Hawk 無法監控執行 <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 較低版本的叢集。 </para>
    </listitem>
    <listitem>
     <para>如果您沒有在每個叢集節點上以您自己的證書 (或官方證書管理中心簽署的證書) 取代 Hawk2 的自行簽署證書，請在<emphasis>每個</emphasis>叢集中的<emphasis>每個</emphasis>節點上至少登入 Hawk2 一次。驗證證書 (或在瀏覽器中新增一個例外以使警告不再顯示)。
     </para>
    </listitem>
   </itemizedlist>
   <step>
    <para> 在要用於監控多個叢集的機器上啟動 Hawk2 Web 服務： </para>
    <screen><prompt role="root">root # </prompt><command>systemctl</command> start hawk</screen>
   </step>
   <step>
    <para> 啟動網頁瀏覽器，並輸入執行 Hawk2 之機器的 IP 位址或主機名稱做為 URL：</para>
    <screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para> 登入 Hawk2 Web 介面。 </para>
   </step>
   <step>
    <para>在左側導覽列中選取<guimenu>儀表板</guimenu>。 </para>
   </step>
   <step>
    <para>若要為多個叢集新增儀表板，請按一下<guimenu>新增叢集</guimenu>。</para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="hawk2-dashboard-add-cluster.png" width="100%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="hawk2-dashboard-add-cluster.png" width="95%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </informalfigure>
    <substeps>
     <step>
      <para> 輸入自定<guimenu>叢集名稱</guimenu>，用於在<guimenu>儀表板</guimenu>中識別叢集。 </para>
     </step>
     <step>
      <para>輸入<guimenu>叢集中節點的主機名稱</guimenu>。</para>
     </step>
    
     <step>
      <para>按一下<guimenu>新增</guimenu>，確認所做的變更。</para>
     </step>
     <step>
      <para> 若要將更多叢集新增至該儀表板，請再次按一下<guimenu>新增叢集</guimenu>，然後輸入下一個叢集的詳細資料。 </para>
      <figure>
       <title>Hawk2—儀表板</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="hawk2-dashboard-multiple-clusters.png" width="100%" format="PNG"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="hawk2-dashboard-multiple-clusters.png" width="80%" format="PNG"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
    </substeps>
   </step>
   <step>
    <para> 若要從儀表板中移除某個叢集，請按一下該叢集名稱旁邊的 <literal>x</literal> 圖示。 </para>
   </step>
   <step>
    <para> 若要檢視某個叢集的詳細資料，請輸入密碼，然後按一下<guimenu>連接</guimenu>。 </para>
    <para> Hawk2 會顯示相應節點、資源和票證的狀態摘要。如果按一下叢集名稱，系統會顯示該叢集的<guimenu>狀態</guimenu>檢視窗，可用於像平常一樣管理該叢集。</para>
   </step>
  </procedure>
   <para>
    節點或資源的任何狀態變更幾乎都會即時反映在<guimenu>儀表板</guimenu>中。
   </para>
  </sect3>
 <sect3 xml:id="sec-ha-geo-manage-hawk2-tickets">
  <title>使用 Hawk2 管理票證</title>
  <para>
   如果票證至少已授予或撤銷一次，或者在票證相依性中加以參考，那麼這些票證在 Hawk2 中即可見。 </para>
  <para>Hawk2 顯示以下票證狀態：</para>
  <itemizedlist>
   <listitem>
    <para><guimenu>已授權</guimenu>：已將票證授予給目前網站。</para>
   </listitem>
   <listitem>
    <para>
     <guimenu>其他位置</guimenu>：已將票證授予給其他網站。</para>
   </listitem>
   <listitem>
    <para>
     <guimenu>已撤銷</guimenu>：已撤銷票證。此外，如果在票證相依性中參考了票證，但尚未將票證授予給任何網站，則 Hawk2 也會將票證顯示為已撤銷。</para>
   </listitem>
  </itemizedlist>
  <note>
   <title>向目前網站授予票證和撤銷票證</title>
   
   <para> 儘管您可以使用 Hawk2 檢視所有網站的票證，但 Hawk2 觸發的任何授予或撤銷操作只適用於目前網站 (目前使用 Hawk2 連接到的網站)。若要將票證授予地理叢集的另一個網站，請在屬於相應網站的其中一個叢集節點上啟動 Hawk2。</para>
   <para>只能授予尚未指定給任何網站的票證。</para>
  </note>

  <procedure xml:id="pro-ha-config-hawk2-viewtickets">
   <title>使用 Hawk2 檢視、授予和撤銷票證</title>

   <step>
    <para> 啟動網頁瀏覽器並登入 Hawk2。 </para>
   </step>
   <step>
    <para> 在左側導覽列中選取<guimenu>狀態</guimenu>。</para>
    <para> 除了叢集節點與資源的相關資訊外，Hawk2 還會顯示<guimenu>票證</guimenu>類別。其中列出了票證狀態、參考票證的條件約束 ID，以及票證名稱。<guimenu>票證</guimenu>類別還包含兩個用於管理票證的欄。</para>
   </step>
   <step>
    <para> 若要顯示特定票證的詳細資料，請按一下該票證旁邊的<guimenu>詳細資料</guimenu>圖示。此時會出現一個視窗，其中顯示是否已授予該票證、設定了哪個<guimenu>遺失規則</guimenu> (適用於從網站中撤銷了票證的情況)，以及哪些資源相依於該票證。</para>
    <figure>
     <title>Hawk2 - 票證詳細資料</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="hawk2-geo-ticket-details.png" width="100%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="hawk2-geo-ticket-details.png" width="80%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
   </step>
   <step>
    <para> 若要從目前網站中撤銷已授予的票證或者要向目前網站授予某個票證，請按一下該票證旁邊<guimenu>已授權</guimenu>欄中的開關。按下後，將顯示可用的動作。當 Hawk2 提示確認時，請確認選擇。 </para>
    <para> 如果出於任何原因無法授予或撤銷票證，Hawk2 將顯示錯誤訊息。如果已成功授予或撤銷票證，Hawk2 將更新票證<guimenu>狀態</guimenu>。 </para>
   </step>
  </procedure>
  <para>
   <remark>taroth 2015-11-02: according to dzyuzin, simulating granting and revoking tickets with
    hawk2 does not work yet, therefore commenting the following procedure</remark>
  </para>
  
  
 </sect3>
 </sect2>
