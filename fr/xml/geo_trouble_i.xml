<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="geo_trouble_i.xml" version="5.0" xml:id="sec-ha-geo-trouble">


 <title>Dépannage</title>

 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:maintainer/>
        <dm:status>modification</dm:status>
        <dm:deadline/>
        <dm:priority/>
        <dm:translation>oui</dm:translation>
        <dm:languages/>
        <dm:release/>
        <dm:repository/>
      </dm:docmanager>
    </info>
    <para>
  Le booth utilise le même mécanisme de consignation que CRM. Par conséquent, toute modification du niveau de consignation s'applique également au booth. Les messages de journal de booth contiennent également des informations à propos des tickets.
 </para>

 <para>
  Les messages de journal et le fichier de configuration de booth sont inclus dans le <command>rapport CRM</command>.
 </para>

 <para>
  En cas de problème ou de comportement anormal de booth, vérifiez les données de consignation en exécutant <command>sudo journalctl -n</command> ou créez un rapport de grappe détaillé à l'aide de la commande <command>crm report</command>.
 </para>

 <para>
  Si vous pouvez accéder aux noeuds de grappe sur tous les sites (ainsi qu'aux arbitres) à partir d'un seul hôte via SSH, vous pouvez collecter les fichiers journaux de chacun d'eux dans le même <literal>rapport CRM</literal>. Lorsque vous appelez la commande <command>crm report</command> avec l'option <option>-n</option>, elle collecte les journaux de tous les hôtes spécifiés avec <option>-n</option> (sans l'option <option>-n</option>, elle essaierait d'obtenir la liste des noeuds de la grappe concernée). Par exemple, pour créer un seul fichier de <literal>rapport CRM</literal> incluant les fichiers journaux de deux grappes à deux noeuds (<literal>192.168.201.111</literal>|<literal>192.168.201.112</literal> et <literal>192.168.202.111</literal>|<literal>192.168.202.112</literal>) et d'un arbitre (<literal>147.2.207.14</literal>), utilisez la commande suivante :
 </para>

<screen><prompt role="root">root # </prompt> crm report -n "147.2.207.14 192.168.201.111 192.168.201.112 \
 192.168.202.111 192.168.202.112"  -f 10:00 -t 11:00 db-incident</screen>

 <para>
  Si le problème ne concerne que le booth et que vous savez sur quels noeuds de grappe (au sein d'un site) le booth s'exécutez, spécifiez uniquement ces deux nœuds plus l'arbitre.
 </para>

 <para>
  Si vous ne pouvez pas accéder à tous les sites à partir d'un seul hôte, exécutez la commande <command>crm report</command> séparément sur l'arbitre et sur les noeuds de grappe des différents sites, en spécifiant la même période. Pour collecter les fichiers journaux sur un arbitre, vous devez utiliser l'option <option>‑S</option> pour effectuer l'opération sur un seul noeud :
 </para>

<screen>amsterdam # crm report -f 10:00 -t 11:00 db-incident-amsterdam
berlin # crm report -f 10:00 -t 11:00 db-incident-berlin
arbitrator # crm report -S -f 10:00 -t 11:00 db-incident-arbitrator</screen>

 <para>
  Toutefois, il est préférable de générer un seul <literal>rapport CRM</literal> pour toutes les machines dont vous souhaitez collecter les fichiers journaux.
 </para>
</sect1>
