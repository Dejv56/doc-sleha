<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="geo_upgrade_i.xml" version="5.0" xml:id="sec-ha-geo-upgrade">
 <title>Aggiornamento alla versione più recente del prodotto</title>

 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:maintainer/>
        <dm:status>modifica</dm:status>
        <dm:deadline/>
        <dm:priority/>
        <dm:translation>sì</dm:translation>
        <dm:languages/>
        <dm:release/>
        <dm:repository/>
      </dm:docmanager>
    </info>
    <para> Per istruzioni generiche su come aggiornate un cluster, vedere la <citetitle>Guida di amministrazione</citetitle> di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> <phrase role="productnumber"><phrase os="sles">12 SP2</phrase></phrase>, disponibile in <link xlink:href="http://www.suse.com/documentation/"/>. Il capitolo <citetitle>Aggiornamento del cluster e aggiornamento dei pacchetti software</citetitle> descrive inoltre quali preparazioni intraprendere prima di avviare il processo di upgrade. </para>

 <table xml:id="table-ha-geo-upgrade-oview">
  <title>Percorsi di upgrade supportati per SLE HA e SLE HA Geo</title>
  <tgroup cols="3">
   <colspec colnum="1" colname="1" colwidth="25*"/>
   <colspec colnum="2" colname="2" colwidth="22*"/>
   <colspec colnum="3" colname="3" colwidth="53*"/>
   <thead>
    <row>
     <entry>
      <para> Upgrade da ... a </para>
     </entry>
     <entry>
      <para> Upgrade </para>
     </entry>
     <entry>
      <para> Per i dettagli, vedere </para>
     </entry>
    </row>
   </thead>
   <tbody>
    <row>
     <entry>
      <para> Da SLE HA 11 SP3 a SLE HA (Geo) 12 </para>
     </entry>
     <entry>
      <para> Migrazione offline </para>
     </entry>
     <entry>
      <itemizedlist>
       <listitem>
        <para> Sistema base: <citetitle>SUSE Linux Enterprise Server 12 - Guida alla distribuzione</citetitle>, parte relativa a <citetitle>aggiornamento e upgrade di Linux Enterprise</citetitle>
        </para>
       </listitem>
       <listitem>
        <para> SLE HA: <citetitle>Guida di amministrazione per <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 12 SP1</citetitle>, capitolo relativo a <citetitle>upgrade del cluster e aggiornamento dei pacchetti software</citetitle>, sezione dedicata alla <citetitle>migrazione offline</citetitle>
        </para>
       </listitem>
       <listitem>
        <para> SLE HA Geo: <xref linkend="sec-ha-geo-upgrade-offline" xrefstyle="select:title nopage"/>
        </para>
       </listitem>
      </itemizedlist>
     </entry>
    </row>
    <row>
     <entry>
      <para> Da SLE HA (Geo) 11 SP4 a SLE HA (Geo) 12 SP1 </para>
     </entry>
     <entry>
      <para> Migrazione offline </para>
     </entry>
     <entry>
      <itemizedlist>
       <listitem>
        <para> Sistema base: <citetitle>Guida alla distribuzione per SUSE Linux Enterprise Server 12 SP1</citetitle>, parte relativa ad <citetitle>aggiornamento e upgrade di Linux Enterprise</citetitle>
        </para>
       </listitem>
       <listitem>
        <para> SLE HA: <citetitle>Guida di amministrazione per <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 12 SP1</citetitle>, capitolo relativo a <citetitle>upgrade del cluster e aggiornamento dei pacchetti software</citetitle>, sezione dedicata alla <citetitle>migrazione offline</citetitle>
        </para>
       </listitem>
       <listitem>
        <para> SLE HA Geo: <xref linkend="sec-ha-geo-upgrade-arbitrators" xrefstyle="select:title nopage"/> </para>
       </listitem>
      </itemizedlist>
     </entry>
    </row>
    <row>
     <entry>
      <para> Da SLE HA (Geo) 12 a SLE HA (Geo) 12 SP1 </para>
     </entry>
     <entry>
      <para> Upgrade in sequenza </para>
     </entry>
     <entry>
      <itemizedlist>
       <listitem>
        <para> Sistema base: <citetitle>Guida alla distribuzione per SUSE Linux Enterprise Server 12 SP1</citetitle>, parte relativa ad <citetitle>aggiornamento e upgrade di Linux Enterprise</citetitle>
        </para>
       </listitem>
       <listitem>
        <para> SLE HA: <citetitle>Guida di amministrazione per <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 12 SP1</citetitle>, capitolo relativo a <citetitle>upgrade del cluster e aggiornamento dei pacchetti software</citetitle>, sezione dedicata all'<citetitle>upgrade in sequenza</citetitle>
        </para>
       </listitem>
       <listitem>
         <para> SLE HA Geo: <xref linkend="sec-ha-geo-upgrade-arbitrators" xrefstyle="select:title nopage"/> </para>
        </listitem>
       </itemizedlist>
     </entry>
    </row>
    <row>
     <entry>
      <para> Da SLE HA (Geo) 12 SP1 a SLE HA (Geo) 12 SP2</para>
     </entry>
     <entry>
      <para> Upgrade in sequenza </para>
     </entry>
     <entry>
      <itemizedlist>
       <listitem>
        <para> Sistema base: <citetitle>Guida alla distribuzione per SUSE Linux Enterprise Server 12 SP2</citetitle>, parte relativa ad <citetitle>aggiornamento e upgrade di Linux Enterprise</citetitle>
        </para>
       </listitem>
       <listitem>
        <para> SLE HA: <citetitle>Guida di amministrazione di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 12 SP2</citetitle>, capitolo relativo a <citetitle>upgrade del cluster e aggiornamento dei pacchetti software</citetitle>, sezione dedicata all'<citetitle>upgrade in sequenza</citetitle>
        </para>
       </listitem>
       <listitem>
        <para> SLE HA Geo: <xref linkend="sec-ha-geo-upgrade-arbitrators" xrefstyle="select:title nopage"/> </para>
       </listitem>
       <listitem>
        <para>Da DRBD 8 a DRBD 9: <citetitle>Guida di amministrazione di <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 12 SP2</citetitle>, capitolo relativo a <citetitle>DRBD</citetitle>, sezione dedicata alla <citetitle>migrazione da DRBD 8 a DRBD 9</citetitle>
         </para>
       </listitem>
      </itemizedlist>
     </entry>
    </row>
   </tbody>
  </tgroup>
 </table>

 <sect2 xml:id="sec-ha-geo-upgrade-offline">
  <title>Migrazione offline</title>
  <para> Questa sezione si applica ai seguenti scenari: </para>
  <itemizedlist>
   <listitem>
    <para> Upgrade da SLE HA Geo 11 SP3 a SLE HA Geo 12</para>
   </listitem>
  </itemizedlist>
  <para> La versione booth (v0.1) in <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 a 11 SP3 era basata sull'algoritmo Paxos. La versione booth (v0.2) in <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 SP4 e <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 12 e 12 SPx è parzialmente basata su raft e non è compatibile con quella che esegue v0.1. Non è quindi possibile un upgrade in sequenza da sistemi che eseguono la precedente versione booth a una che esegue la nuova versione booth. Al contrario, tutti i nodi del cluster non devono essere in linea e il cluster deve essere migrato interamente come descritto nella <xref linkend="pro-ha-geo-upgrade-offline"/>.</para>
  <para> A causa della nuova funzionalità multi-tenant, il nuovo script init dell'arbitro non può interrompere o provare lo stato dell'arbitro Paxos v0.1. Con l'upgrade a v0.2, l'arbitro viene arrestato, se in esecuzione. L'agente risorsa OCF <literal>ocf:pacemaker:booth-site</literal> è in grado di arrestare e monitorare il daemon del sito v0.1 di booth. </para>

  <procedure xml:id="pro-ha-geo-upgrade-offline">
   <title>Esecuzione di una migrazione offline a livello del cluster</title>
   <step>
    <para>Per un upgrade di tutti i nodi del cluster, seguire le istruzioni nella <citetitle>Guida di amministrazione per <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 12 SP1</citetitle>, capitolo relativo a <citetitle>upgrade del cluster e aggiornamento dei pacchetti software</citetitle>, sezione dedicata alla <citetitle>migrazione offline</citetitle>. </para>
   </step>
   <step>
    <para> Se si utilizzano gli arbitri al di fuori dei siti del cluster: </para>
    <substeps performance="required">
      <step>
      <para> Eseguire l'upgrade di ogni arbitro alla versione di SUSE Linux Enterprise Server desiderata. Per i dettagli dei singoli processi di upgrade, vedere <xref linkend="table-ha-geo-upgrade-oview"/>. </para>
     </step>
     <step>
      <para> Aggiungere l'estensione Geo cluster e installare i pacchetti come descritto nella <xref linkend="sec-ha-geo-inst-arbitrators"/>. </para>
     </step>
    </substeps>
   </step>
   <step>
    <para> Poiché la sintassi e l'algoritmo di consenso sono stati modificati, è necessario aggiornare i file di configurazione booth in modo che corrispondano a requisiti più recenti. In precedenza era possibile specificare facoltativamente il tempo di scadenza e i pesi aggiungendoli al nome richiesta con un punto e virgola (<literal>;</literal>) come separatore. La nuova sintassi prevede token separati per tutte le opzioni della richiesta. Per ulteriori informazioni, vedere <xref linkend="sec-ha-geo-booth"/>. Se non è stato specificato il tempo di scadenza o i pesi diversi dai valori di default e non si desidera utilizzare la funzionalità multi-tenant, è sempre possibile utilizzare il precedente <filename>/etc/booth/booth.conf</filename>. </para>
   </step>
   <step>
    <para> Sincronizzare i file di configurazione booth aggiornati tra tutti gli arbitri e i siti del cluster. </para>
   </step>
   <step>
    <para> Avviare il servizio booth su arbitri e siti del cluster come descritto nella <xref linkend="sec-ha-geo-setup-booth-service"/>. </para>
   </step>
  </procedure>
 </sect2>
 <sect2 xml:id="sec-ha-geo-upgrade-arbitrators">
  <title>Upgrade dell'arbitro</title>
  <para> Questa sezione si applica ai seguenti scenari: </para>
  <itemizedlist>
   <listitem>
    <para> Upgrade da SLE HA Geo 11 SP4 a SLE HA Geo 12 SP1 </para>
   </listitem>
   <listitem>
    <para> Upgrade da SLE HA Geo 12 a SLE HA Geo 12 SP1</para>
   </listitem>
   <listitem>
    <para> Upgrade da SLE HA Geo 12 SP1 a SLE HA Geo 12 SP2</para>
   </listitem>
  </itemizedlist>

  <procedure xml:id="pro-ha-geo-upgrade-arbitrators">
   <title>Upgrade degli arbitri al di fuori del cluster</title>
   <para> Se si utilizzano arbitri al di fuori dei siti del cluster, procedere come segue per ogni arbitro:</para>
  <step>
    <para>Eseguire un upgrade alla versione target desiderata di SUSE Linux Enterprise Server. Per i dettagli dei singoli processi di upgrade, vedere <xref linkend="table-ha-geo-upgrade-oview"/>.</para>
   </step>
   <step>
    <para> Aggiungere l'estensione Geo cluster e installare i pacchetti come descritto nella <xref linkend="sec-ha-geo-inst-arbitrators"/>. </para>
   </step>
  </procedure>
 </sect2>
</sect1>
