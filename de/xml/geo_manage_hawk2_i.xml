<?xml version="1.0" encoding="UTF-8"?>
<sect2 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="geo_manage_hawk2_i.xml" xml:id="sec-ha-geo-manage-hawk2" version="5.0">
 <title>Mit der HA Web Konsole (Hawk2)</title>

 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:maintainer/>
        <dm:status>Bearbeiten</dm:status>
        <dm:deadline/>
        <dm:priority/>
        <dm:translation>Ja</dm:translation>
        <dm:languages/>
        <dm:release/>
        <dm:repository/>
      </dm:docmanager>
    </info>
    <para>Hawk2 ist ist eine webbasierte Benutzeroberfläche für die Verwaltung von Clustern und GeoClustern.</para>

  <sect3 xml:id="sec-ha-geo-manage-hawk2-dashboard">

   <title>Überwachen mehrerer Cluster mit dem Hawk2-Dashboard</title>
   <para>
    Die im <guimenu>Dashboard</guimenu> angezeigten Cluster-Informationen sind auf der Serverseite gespeichert und werden zwischen den Cluster-Knoten synchronisiert (wenn SSH-Zugriff ohne Passwort zwischen den Cluster-Knoten konfiguriert wurde). Ausführliche Informationen finden Sie im <citetitle>Administration Guide</citetitle> (Administrationshandbuch) für <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> unter <link xlink:href="http://www.suse.com/documentation/"/>. Lesen Sie im Kapitel <citetitle>Running Cluster Reports Without <systemitem class="username">root</systemitem> Access</citetitle> (Ausführen von Cluster-Berichten ohne „root“-Zugriff) den Abschnitt <citetitle>Configuring a Passwordless SSH Account</citetitle> (Konfigurieren eines SSH-Kontos ohne Passwort). Der Rechner, auf dem Sie Hawk2 ausführen, muss zu diesem Zweck nicht zu einem Cluster gehören, sondern kann ein separates, eigenständiges System sein.
   </para>
  <procedure xml:id="pro-ha-config-hawk2-geo-dashboard">
   <title>Mehrere Cluster mit Hawk2 überwachen</title>
   <itemizedlist>
    <title>Voraussetzungen</title>
    <listitem>
     <para> Auf allen Clustern, die über das <guimenu>Dashboard</guimenu> von Hawk2 überwacht werden sollen, muss <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> <phrase role="productnumber"><phrase os="sles">12 SP2</phrase></phrase> ausgeführt werden. Cluster mit früheren Versionen von <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> können nicht überwacht werden. </para>
    </listitem>
    <listitem>
     <para>Wenn Sie das eigensignierte Zertifikat für Hawk2 nicht auf jedem Cluster-Knoten durch ein eigenes Zertifikat (oder ein von einer offiziellen  Zertifizierungsstelle signiertes Zertifikat) ersetzt haben, melden Sie sich auf <emphasis>jedem</emphasis> Knoten in <emphasis>jedem</emphasis> Cluster mindestens einmal bei Hawk2 an. Überprüfen Sie das Zertifikat (oder fügen Sie im Browser eine Ausnahme hinzu, um die Warnung zu umgehen).
     </para>
    </listitem>
   </itemizedlist>
   <step>
    <para> Starten Sie den Hawk2-Web-Service auf einem Rechner, den Sie zum Überwachen mehrerer Cluster verwenden möchten: </para>
    <screen><prompt role="root">root # </prompt><command>systemctl</command> start hawk</screen>
   </step>
   <step>
    <para> Starten Sie einen Webbrowser und geben Sie als URL die IP-Adresse oder den Hostnamen des Rechners ein, auf dem Hawk2 ausgeführt wird:</para>
    <screen>https://<replaceable>HAWKSERVER</replaceable>:7630/</screen>
   </step>
   <step>
    <para> Melden Sie sich an der Hawk2-Weboberfläche an. </para>
   </step>
   <step>
    <para>Wählen Sie auf der linken Navigationsleiste <guimenu>Dashboard</guimenu> aus. </para>
   </step>
   <step>
    <para>Zum Hinzufügen von Dashboards für mehrere Cluster klicken Sie auf <guimenu>Cluster hinzufügen</guimenu>.</para>
    <informalfigure>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="hawk2-dashboard-add-cluster.png" width="100%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="hawk2-dashboard-add-cluster.png" width="95%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </informalfigure>
    <substeps>
     <step>
      <para> Geben Sie einen benutzerdefinierten Wert für <guimenu>Clustername</guimenu> ein, an dem der Cluster im <guimenu>Dashboard</guimenu> zu erkennen ist. </para>
     </step>
     <step>
      <para>Geben Sie einen Wert für <guimenu>Hostname des Knotens im Cluster</guimenu> ein.</para>
     </step>
    
     <step>
      <para>Bestätigen Sie Ihre Änderungen mit <guimenu>Hinzufügen</guimenu>.</para>
     </step>
     <step>
      <para> Wenn Sie dem Dashboard weitere Cluster hinzufügen möchten, klicken Sie erneut auf <guimenu>Cluster hinzufügen</guimenu> und geben Sie die Details zum nächsten Cluster ein. </para>
      <figure>
       <title>Hawk2-Dashboard</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="hawk2-dashboard-multiple-clusters.png" width="100%" format="PNG"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="hawk2-dashboard-multiple-clusters.png" width="80%" format="PNG"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
    </substeps>
   </step>
   <step>
    <para> Zum Entfernen eines Clusters aus dem Dashboard klicken Sie auf das Symbol <literal>x</literal> neben dem Namen des Clusters. </para>
   </step>
   <step>
    <para> Wenn Sie Details zu einem Cluster anzeigen möchten, geben Sie ein Passwort ein und klicken Sie auf <guimenu>Verbinden</guimenu>. </para>
    <para> Es wird eine Zusammenfassung mit dem Status der betreffenden Knoten, Ressourcen und Tickets angezeigt. Durch Klicken auf den Namen eines Clusters gelangen Sie zur Ansicht <guimenu>Status</guimenu> für diesen Cluster. Dort können Sie den Cluster wie gewohnt verwalten.</para>
   </step>
  </procedure>
   <para>
    Alle Statusänderungen für Knoten oder Ressourcen werden fast sofort im <guimenu>Dashboard</guimenu> angezeigt.
   </para>
  </sect3>
 <sect3 xml:id="sec-ha-geo-manage-hawk2-tickets">
  <title>Verwalten von Tickets mit Hawk2</title>
  <para>
   Tickets sind in Hawk2 sichtbar, wenn Sie mindestens einmal gewährt oder zurückgezogen wurden oder wenn in einer Ticketabhängigkeit auf sie Bezug genommen wird. </para>
  <para>In Hawk2 werden die folgenden Ticketstatus angezeigt:</para>
  <itemizedlist>
   <listitem>
    <para><guimenu>Gewährt</guimenu>: Tickets, die der aktuellen Site gewährt wurden.</para>
   </listitem>
   <listitem>
    <para>
     <guimenu>An anderer Stelle</guimenu>: Tickets, die einer anderen Site gewährt wurden.</para>
   </listitem>
   <listitem>
    <para>
     <guimenu>Zurückgenommen</guimenu>: Tickets, die zurückgezogen wurden. Zusätzlich werden in Hawk2 Tickets auch als zurückgezogen angezeigt, wenn in einer Ticketabhängigkeit auf sie Bezug genommen wird, sie aber noch keiner Site gewährt worden sind.</para>
   </listitem>
  </itemizedlist>
  <note>
   <title>Gewähren von Tickets für die aktuelle Site und Zurückziehen von Tickets</title>
   
   <para> Sie können mit Hawk2 zwar Tickets für alle Sites anzeigen, aber von Hawk2 ausgelöste Gewährungs- und Zurückziehungsvorgänge gelten nur für die aktuelle Site (mit der Sie aktuell über Hawk2 verbunden sind). Um ein Ticket einer anderen Site des GeoClusters zu gewähren, starten Sie Hawk2 auf einem der Cluster-Knoten, die zu der betreffenden Site gehören.</para>
   <para>Sie können nur Tickets gewähren, die noch keiner anderen Site gewährt wurden.</para>
  </note>

  <procedure xml:id="pro-ha-config-hawk2-viewtickets">
   <title>Tickets mit Hawk2 anzeigen, gewähren und zurückziehen</title>

   <step>
    <para> Starten Sie einen Webbrowser und melden Sie sich bei Hawk2 an. </para>
   </step>
   <step>
    <para> Wählen Sie auf der linken Navigationsleiste <guimenu>Status</guimenu> aus.</para>
    <para> Neben Informationen zu Cluster-Knoten und Ressourcen wird auch eine Kategorie namens <guimenu>Tickets</guimenu> angezeigt. Darin werden der Ticketstatus, die ID der Einschränkung, die Bezug auf das Ticket nimmt, sowie der Name des Tickets angezeigt. Die Kategorie <guimenu>Tickets</guimenu> enthält auch zwei Spalten für die Verwaltung der Tickets.</para>
   </step>
   <step>
    <para> Um Details zu einem bestimmten Ticket anzuzeigen, klicken Sie auf das Symbol <guimenu>Details</guimenu> neben dem Ticket. In einem Fenster wird angezeigt, ob das Ticket bereits gewährt wurde, ob eine <guimenu>Verlustrichtlinie</guimenu> festgelegt wurde (für den Fall, dass ein Ticket von einer Site zurückgezogen wird) und welche Ressourcen von dem Ticket abhängig sind.</para>
    <figure>
     <title>Hawk2 – Ticketdetails</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="hawk2-geo-ticket-details.png" width="100%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="hawk2-geo-ticket-details.png" width="80%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
   </step>
   <step>
    <para> Wenn Sie ein gewährtes Ticket von der aktuellen Site zurückziehen oder dieser ein Ticket gewähren möchten, klicken Sie auf den Schalter in der Spalte <guimenu>Gewährt</guimenu> neben dem Ticket. Wenn Sie darauf klicken, wird die verfügbare Aktion eingeblendet. Bestätigen Sie Ihre Auswahl, wenn Sie dazu aufgefordert werden. </para>
    <para> Wenn das Ticket aus irgendeinem Grund nicht gewährt oder zurückgezogen werden kann, wird eine Fehlermeldung angezeigt. Wenn das Ticket erfolgreich gewährt oder zurückgezogen wurde, wird der <guimenu>Status</guimenu> des Tickets aktualisiert. </para>
   </step>
  </procedure>
  <para>
   <remark>taroth 2015-11-02: according to dzyuzin, simulating granting and revoking tickets with
    hawk2 does not work yet, therefore commenting the following procedure</remark>
  </para>
  
  
 </sect3>
 </sect2>
