<?xml version="1.0" encoding="UTF-8"?>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="geo_upgrade_i.xml" version="5.0" xml:id="sec-ha-geo-upgrade">
 <title>Upgrade auf die neueste Produktversion</title>

 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:maintainer/>
        <dm:status>Bearbeiten</dm:status>
        <dm:deadline/>
        <dm:priority/>
        <dm:translation>Ja</dm:translation>
        <dm:languages/>
        <dm:release/>
        <dm:repository/>
      </dm:docmanager>
    </info>
    <para> Eine allgemeine Anleitung zum Durchführen eines Upgrades für einen Cluster finden Sie im <citetitle>Administration Guide</citetitle> (Administrationshandbuch) für <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> <phrase role="productnumber"><phrase os="sles">12 SP2</phrase></phrase>. Dieses ist unter <link xlink:href="http://www.suse.com/documentation/"/> verfügbar. Im Kapitel <citetitle>Upgrading Your Cluster and Updating Software Packages</citetitle> (Durchführen eines Upgrades für den Cluster und Aktualisieren von Softwarepaketen) wird auch beschrieben, welche Vorbereitungen vor Beginn des Upgrades getroffen werden müssen. </para>

 <table xml:id="table-ha-geo-upgrade-oview">
  <title>Unterstützte Upgrade-Pfade für SLE HA und SLE HA Geo</title>
  <tgroup cols="3">
   <colspec colnum="1" colname="1" colwidth="25*"/>
   <colspec colnum="2" colname="2" colwidth="22*"/>
   <colspec colnum="3" colname="3" colwidth="53*"/>
   <thead>
    <row>
     <entry>
      <para> Upgrade von ... auf </para>
     </entry>
     <entry>
      <para> Upgrade-Pfad </para>
     </entry>
     <entry>
      <para> Weitere Informationen </para>
     </entry>
    </row>
   </thead>
   <tbody>
    <row>
     <entry>
      <para> SLE HA 11 SP3 auf SLE HA (Geo) 12 </para>
     </entry>
     <entry>
      <para> Offline-Migration </para>
     </entry>
     <entry>
      <itemizedlist>
       <listitem>
        <para> Basissystem: <citetitle>Bereitstellungshandbuch für SUSE Linux Enterprise Server 12</citetitle>, Teil <citetitle>Aktualisieren und Aufrüsten von SUSE Linux Enterprise</citetitle>
        </para>
       </listitem>
       <listitem>
        <para> SLE HA: <citetitle>Administration Guide for <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 12 SP1</citetitle> (Administrationshandbuch), Kapitel <citetitle>Upgrading Your Cluster and Updating Software Packages</citetitle> (Durchführen eines Upgrades für den Cluster und Aktualisieren von Softwarepaketen), Abschnitt <citetitle>Offline Migration</citetitle> (Offline-Migration)
        </para>
       </listitem>
       <listitem>
        <para> SLE HA Geo: <xref linkend="sec-ha-geo-upgrade-offline" xrefstyle="select:title nopage"/>
        </para>
       </listitem>
      </itemizedlist>
     </entry>
    </row>
    <row>
     <entry>
      <para> SLE HA (Geo) 11 SP4 auf SLE HA (Geo) 12 SP1 </para>
     </entry>
     <entry>
      <para> Offline-Migration </para>
     </entry>
     <entry>
      <itemizedlist>
       <listitem>
        <para> Basissystem: <citetitle>Bereitstellungshandbuch für SUSE Linux Enterprise Server 12 SP1</citetitle>, Teil <citetitle>Aktualisieren und Aufrüsten von SUSE Linux Enterprise</citetitle>
        </para>
       </listitem>
       <listitem>
        <para> SLE HA: <citetitle>Administration Guide for <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 12 SP1</citetitle> (Administrationshandbuch), Kapitel <citetitle>Upgrading Your Cluster and Updating Software Packages</citetitle> (Durchführen eines Upgrades für den Cluster und Aktualisieren von Softwarepaketen), Abschnitt <citetitle>Offline Migration</citetitle> (Offline-Migration)
        </para>
       </listitem>
       <listitem>
        <para> SLE HA Geo: <xref linkend="sec-ha-geo-upgrade-arbitrators" xrefstyle="select:title nopage"/> </para>
       </listitem>
      </itemizedlist>
     </entry>
    </row>
    <row>
     <entry>
      <para> SLE HA (Geo) 12 auf SLE HA (Geo) 12 SP1 </para>
     </entry>
     <entry>
      <para> sukzessives Upgrade </para>
     </entry>
     <entry>
      <itemizedlist>
       <listitem>
        <para> Basissystem: <citetitle>Bereitstellungshandbuch für SUSE Linux Enterprise Server 12 SP1</citetitle>, Teil <citetitle>Aktualisieren und Aufrüsten von SUSE Linux Enterprise</citetitle>
        </para>
       </listitem>
       <listitem>
        <para> SLE HA: <citetitle>Administration Guide for <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 12 SP1</citetitle> (Administrationshandbuch), Kapitel <citetitle>Upgrading Your Cluster and Updating Software Packages</citetitle> (Durchführen eines Upgrades für den Cluster und Aktualisieren von Softwarepaketen), Abschnitt <citetitle>Rolling Upgrade</citetitle> (Sukzessives Upgrade)
        </para>
       </listitem>
       <listitem>
         <para> SLE HA Geo: <xref linkend="sec-ha-geo-upgrade-arbitrators" xrefstyle="select:title nopage"/> </para>
        </listitem>
       </itemizedlist>
     </entry>
    </row>
    <row>
     <entry>
      <para> SLE HA (Geo) 12 SP1 auf SLE HA (Geo) 12 SP2</para>
     </entry>
     <entry>
      <para> sukzessives Upgrade </para>
     </entry>
     <entry>
      <itemizedlist>
       <listitem>
        <para> Basissystem: <citetitle>Bereitstellungshandbuch für SUSE Linux Enterprise Server 12 SP2</citetitle>, Teil <citetitle>Aktualisieren und Aufrüsten von SUSE Linux Enterprise</citetitle>
        </para>
       </listitem>
       <listitem>
        <para> SLE HA: <citetitle>Administration Guide for <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 12 SP2</citetitle> (Administrationshandbuch), Kapitel <citetitle>Upgrading Your Cluster and Updating Software Packages</citetitle> (Durchführen eines Upgrades für den Cluster und Aktualisieren von Softwarepaketen), Abschnitt <citetitle>Rolling Upgrade</citetitle> (Sukzessives Upgrade)
        </para>
       </listitem>
       <listitem>
        <para> SLE HA Geo: <xref linkend="sec-ha-geo-upgrade-arbitrators" xrefstyle="select:title nopage"/> </para>
       </listitem>
       <listitem>
        <para>DRBD 8 auf DRBD 9: <citetitle>Administration Guide for <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 12 SP2</citetitle> (Administrationshandbuch), Kapitel <citetitle>DRBD</citetitle>, Abschnitt <citetitle>Migrating from DRBD 8 to DRBD 9</citetitle> (Migrieren von DRBD 8 zu DRBD 9)
         </para>
       </listitem>
      </itemizedlist>
     </entry>
    </row>
   </tbody>
  </tgroup>
 </table>

 <sect2 xml:id="sec-ha-geo-upgrade-offline">
  <title>Offline-Migration</title>
  <para> Dieser Abschnitt gilt für die folgenden Szenarios: </para>
  <itemizedlist>
   <listitem>
    <para> Upgrade von SLE HA Geo 11 SP3 auf SLE HA Geo 12</para>
   </listitem>
  </itemizedlist>
  <para> Die booth-Version (v0.1) in <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 bis 11 SP3 basierte auf dem Paxos-Algorithmus. Die booth-Version (v0.2) in <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 11 SP4 sowie <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 12 und 12 SPx basiert grob auf raft und ist mit der Version v0.1 nicht kompatibel. Daher ist ein sukzessives Upgrade von einem System mit der alten booth-Version auf ein System mit der neuen booth-Version nicht möglich. Stattdessen müssen alle Cluster-Knoten offline sein und der Cluster muss als Ganzes migriert werden, wie in <xref linkend="pro-ha-geo-upgrade-offline"/> beschrieben.</para>
  <para> Aufgrund der neuen Funktion für mehrere Mandanten kann das neue init-Skript für Vermittler den Paxos v0.1-Vermittler nicht stoppen oder seinen Status testen. Bei einem Upgrade auf v0.2 wird der Vermittler gestoppt, sofern er ausgeführt wird. Der OCF-Ressourcenagent <literal>ocf:pacemaker:booth-site</literal> ist in der Lage, den Site-Daemon von booth v0.1 zu stoppen und zu überwachen. </para>

  <procedure xml:id="pro-ha-geo-upgrade-offline">
   <title>Eine Cluster-weite Offline-Migration ausführen</title>
   <step>
    <para>Für ein Upgrade der Cluster-Knoten folgen Sie den Anweisungen im <citetitle>Administration Guide for <phrase role="productname"><phrase os="sles">SUSE Linux Enterprise High Availability Extension</phrase></phrase> 12 SP1</citetitle> (Administrationshandbuch), Kapitel <citetitle>Upgrading Your Cluster and Updating Software Packages</citetitle> (Durchführen eines Upgrades für den Cluster und Aktualisieren von Softwarepaketen), Abschnitt <citetitle>Offline Migration</citetitle> (Offline-Migration). </para>
   </step>
   <step>
    <para> Wenn Vermittler außerhalb der Cluster-Sites verwendet werden: </para>
    <substeps performance="required">
      <step>
      <para> Führen Sie für jeden Vermittler ein Upgrade auf die gewünschte Version von SUSE Linux Enterprise Server aus. Ausführliche Informationen zu den einzelnen Upgrade-Prozessen finden Sie in <xref linkend="table-ha-geo-upgrade-oview"/>. </para>
     </step>
     <step>
      <para> Fügen Sie die Erweiterung für die GeoCluster-Bildung hinzu und installieren Sie die Pakete, wie in <xref linkend="sec-ha-geo-inst-arbitrators"/> beschrieben. </para>
     </step>
    </substeps>
   </step>
   <step>
    <para> Da sich die Syntax und der Konsensalgorithmus für booth geändert haben, müssen Sie die booth-Konfigurationsdateien entsprechend den neuesten Anforderungen aktualisieren. Früher konnten Sie optional eine Ablaufzeit und Gewichtungen hinzufügen, indem Sie diese mit einem Semikolon (<literal>;</literal>) als Trennzeichen an den Ticketnamen anhängten. Die neue Syntax weist für alle Ticketoptionen separate Token auf. Weitere Informationen finden Sie in <xref linkend="sec-ha-geo-booth"/>. Wenn Sie keine von den Standardwerten abweichenden Werte für Ablaufzeit oder Gewichtungen angegeben haben und die Funktion für mehrere Mandanten nicht verwenden möchten, können Sie weiterhin die alte Datei <filename>/etc/booth/booth.conf</filename> verwenden. </para>
   </step>
   <step>
    <para> Synchronisieren Sie die aktualisierten booth-Konfigurationsdateien zwischen allen Cluster-Sites und Vermittlern. </para>
   </step>
   <step>
    <para> Starten Sie den booth-Service auf den Cluster-Sites und den Vermittlern, wie in <xref linkend="sec-ha-geo-setup-booth-service"/> beschrieben. </para>
   </step>
  </procedure>
 </sect2>
 <sect2 xml:id="sec-ha-geo-upgrade-arbitrators">
  <title>Upgrade von Vermittlern</title>
  <para> Dieser Abschnitt gilt für die folgenden Szenarios: </para>
  <itemizedlist>
   <listitem>
    <para> Upgrade von SLE HA Geo 11 SP4 auf SLE HA Geo 12 SP1 </para>
   </listitem>
   <listitem>
    <para> Upgrade von SLE HA Geo 12 auf SLE HA Geo 12 SP1</para>
   </listitem>
   <listitem>
    <para> Upgrade von SLE HA Geo 12 SP1 auf SLE HA Geo 12 SP2</para>
   </listitem>
  </itemizedlist>

  <procedure xml:id="pro-ha-geo-upgrade-arbitrators">
   <title>Upgrade für die Vermittler außerhalb des Clusters ausführen</title>
   <para> Wenn Sie Vermittler außerhalb der Cluster-Sites verwenden, führen Sie für jeden Vermittler die folgenden Schritte aus:</para>
  <step>
    <para>Führen Sie ein Upgrade auf die gewünschte Zielversion von SUSE Linux Enterprise Server aus. Ausführliche Informationen zu den einzelnen Upgrade-Prozessen finden Sie in <xref linkend="table-ha-geo-upgrade-oview"/>.</para>
   </step>
   <step>
    <para> Fügen Sie die Erweiterung für die GeoCluster-Bildung hinzu und installieren Sie die Pakete, wie in <xref linkend="sec-ha-geo-inst-arbitrators"/> beschrieben. </para>
   </step>
  </procedure>
 </sect2>
</sect1>
